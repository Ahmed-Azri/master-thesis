\chapter{Solução}

A solução proposta por este trabalho foi implementada em cima do controlador
POX \citep{pox}. 
Uma abstração da rede em forma de grafo foi construída como um módulo 
do controlador da rede.
Esse grafo, em tempo real, representando a rede é a base para toda computação
executada sobre a rede.
A solução objetiva simplificar o gerenciamento em redes reduzindo o volume 
de computações ao longo dos nós da rede aproveitando a separação do plano 
de dados e do plano de controle.

\subsection{A abstração em grafos}

O grafo propost é representado por $G=(V, A)$, em que $V$ e $A$ são conjuntos
finitos de vértices e arestas, respectivamente.
Cada vértice $v \in V$ representa um computador (\emph{host}) ou comutador
(\emph{switch}) dentro da rede.
Cada aresta $u \to v \in A$ representa um enlace (\emph{link}) entre dois
vértices.
O peso das arestas $g(u, v)$ descreve a quantidade de \emph{bytes} trafegados
na aresta entre os dois vértices.

\subsection{Controlador}
\label{sec:controller}

O controlador POX é um arcabouço para elaboração de módulos/programas 
em Redes Definidas por \emph{Software}.
Totalmente voltado para pesquisa, o POX é um controlador simples, 
escrito na linguagem de programação \emph{Python}.

Ao ser carregado, o POX, executa o seu núcleo (\emph{core}). 
Esse módulo principal, é responsável por carregar os demais 
módulo e garantir a comunição entre eles.
Ele exporta uma interface baseada em eventos. 
Eventos que descrevem ou representam ações ocorridas na rede.
Um módulo implementado dentro do controlador POX pode ser um 
produtor/consumidor de eventos.

O POX contém alguns módulos de descoberta que publicam eventos relacionados
à topologia da rede:

\begin{itemize}

\item{\emph{topology}}: 

O módulo \emph{topology}, é responsável por mapear a topologia da rede. 
Utilizando os recursos do \emph{core}, ele atua como um canal de eventos 
relacionados à topologia e que os demais módulos podem fazer escuta 
(\emph{listening}).

\item{\emph{host\_tracker}}: 
Seu objetivo é buscar e rastrear informações sobre os computadores 
(\emph{hosts}) dentro da rede.

\item{\emph{openflow.topology}}: 
Um controle de topologia específico para switches OpenFlow.
Ele é integrado com o módulo \emph{topology} do POX.

\item{\emph{openflow.discovery}}: 
Identifica links entre switches OpenFlow por meio do protocolo LLDP.

\item{\emph{misc.dhcpd}}:
Servidor de DHCP para configuração dinâmica da rede IP.

\end{itemize}

Esses módulos são os módulos relevantes para o presente trabalho.
Existem diversos outros módulos dentro do controlador POX, no entanto
eles não serão abordados nesse trabalho.

\section{Projeto de implementação}

A proposta do módulo em grafos é integrada aos módulos citados na seção do 
\ref{sec:controller} (Controlador).
A implementação do módulo é composta por cinco classes:

\begin{itemize}
    \item{Graph} Classe responsável por gerenciar o grafo.
        Todo o tratamento de eventos é feito por essa classe.
        O controle de criação, remoção e atualização de vertices e arestas 
        é feito por essa classe.
    \item{GraphEntity} Classe abstrata que implementa arestas e vértices.
        Essas entidades, vértices e arestas, herdam da classe 
        \emph{GraphEntity}
    \item{Vertex} Classe que representa os vértices do grafo.
        Vértices podem ser máquinas (\emph{hosts}) ou comutadores
        (\emph{switches})
    \item{Edges} Classe que representa as arestas do grafo.
        Arestas são enlaces (\emph{links}) entre dois vértices.
        O peso das arestas é um atributo dos objetos dessa classe.
    \item{GraphManager} Classe responsável por executar computações no 
        grafo.
        Toda implementação de algoritmos em grafos é feita dentro dessa classe.
    \item
\end{itemize}

\subsection{Vértices}

O módulo \emph{topology} dispara os eventos \emph{HostJoin}, \emph{HostLeave},
\emph{SwitchJoin}, \emph{SwitchLeave}.

